<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Hark Zheng">
  <!-- Open Graph Data -->
  <meta property="og:title" content="Spring初识">
  <meta property="og:description" content="软件 技术 学习 分享">
  <meta property="og:site_name" content="Hark的博客">
  <meta property="og:type" content="article">
  <meta property="og:image" content="http://superdino123.github.io.git">
  
    <link rel="alternate" href="/atom.xml" title="Hark的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>Hark的博客</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>


  <body>

    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">Spring初识</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/<your-github-username>">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:<your-email-address>">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-7 col-lg-offset-1 col-md-9 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Hark Zheng</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2019-03-14</span>
            <span class="time">23:51:03</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/Spring/">Spring</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/JavaEE学习/">#JavaEE学习</a> <a class="tag" href="/tags/Spring/">#Spring</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>Spring学习</p>
<a id="more"></a>
<h1 id="Ioc"><a href="#Ioc" class="headerlink" title="Ioc"></a>Ioc</h1><ul>
<li>控制反转：一种描述并通过第三方去产生或获取特定对象的方式</li>
<li>实现方式：Dependency Injection 依赖注入</li>
<li>目的：降低对象之间的耦合</li>
</ul>
<h2 id="BeanFactory-amp-amp-ApplicationContext-接口"><a href="#BeanFactory-amp-amp-ApplicationContext-接口" class="headerlink" title="BeanFactory &amp;&amp; ApplicationContext 接口"></a>BeanFactory &amp;&amp; ApplicationContext 接口</h2><ul>
<li>BeanFactory 是 Spring IoC容器所定义的最底层接口</li>
<li>ApplicationContext 继承 BeanFactory，绝大多数场景应用该接口</li>
<li><a href="https://github.com/superdino123/JavaWebTest/blob/master/src/SpringTest/IoCTest/BeanFactory.java" target="_blank" rel="noopener">https://github.com/superdino123/JavaWebTest/blob/master/src/SpringTest/IoCTest/BeanFactory.java</a></li>
</ul>
<h2 id="Bean的定义与初始化"><a href="#Bean的定义与初始化" class="headerlink" title="Bean的定义与初始化"></a>Bean的定义与初始化</h2><ul>
<li>定义<ul>
<li>Resource定位，根据开发者的配置(注解 || XML)进行资源定位</li>
<li>BeanDefinition的载入，将定位到的信息保存早BeanDefinition中</li>
<li>BeanDefinition的注册，将BeanDefinition信息发布到IoC容器中</li>
</ul>
</li>
<li>初始化</li>
</ul>
<h2 id="Spring-Bean的生命周期"><a href="#Spring-Bean的生命周期" class="headerlink" title="Spring Bean的生命周期"></a>Spring Bean的生命周期</h2><ul>
<li>case: <a href="https://github.com/superdino123/JavaWebTest/blob/master/src/SpringTest/JuiceMaker2Test.java" target="_blank" rel="noopener">https://github.com/superdino123/JavaWebTest/blob/master/src/SpringTest/JuiceMaker2Test.java</a></li>
</ul>
<h1 id="装配Spring-Bean"><a href="#装配Spring-Bean" class="headerlink" title="装配Spring Bean"></a>装配Spring Bean</h1><ul>
<li>实现IOC容器的方式<ul>
<li>依赖查找</li>
<li>依赖注入</li>
</ul>
</li>
</ul>
<h2 id="如何将对象注入到Ioc容器中"><a href="#如何将对象注入到Ioc容器中" class="headerlink" title="如何将对象注入到Ioc容器中"></a>如何将对象注入到Ioc容器中</h2><ul>
<li><p>构造器注入</p>
<ul>
<li>原理<ul>
<li>采用反射的方式，通过使用构造方法来完成注入</li>
</ul>
</li>
<li><p>配置</p>
<pre><code>&lt;bean&gt;
    &lt;constructor-arg index=&quot;&quot; value=&quot;&quot;&gt;
    //constructor-arg : 定义类构造方法的参数
    //index : 用于定义参数的位置
    //value : 用于设置值
</code></pre></li>
</ul>
</li>
<li><p>setter注入</p>
<ul>
<li><p>配置</p>
<pre><code>&lt;bean&gt;
    &lt;property name=&quot;&quot; value=&quot;&quot;&gt;
    //属性 属性名 属性值
</code></pre></li>
</ul>
</li>
<li><p>接口注入</p>
<ul>
<li><p>配置</p>
<pre><code>&lt;bean id=&quot;&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;
    &lt;property name=&quot;jndiName&quot;&gt;
        &lt;value&gt;java:comp/env/jdbc/ssm&lt;/value&gt;
</code></pre></li>
</ul>
</li>
</ul>
<h2 id="Spring中如何配置JavaBean"><a href="#Spring中如何配置JavaBean" class="headerlink" title="Spring中如何配置JavaBean"></a>Spring中如何配置JavaBean</h2><h3 id="配置方式比较"><a href="#配置方式比较" class="headerlink" title="配置方式比较"></a>配置方式比较</h3><ul>
<li>原则：约定优于配置</li>
<li>隐式Bean的发现机制和自动装配原则<ul>
<li>优先使用，减少开发者的决定权，简单又不失灵活</li>
</ul>
</li>
<li>在接口和类中实现配置<ul>
<li>没有办法自动装配时，优先考虑Java接口和类中实现配置，避免XML配置泛滥</li>
</ul>
</li>
<li>在XML中显示配置<ul>
<li>当一个类需要多个实例</li>
<li>当一个父类有多个子类，配置一个父类时</li>
<li>当配置的类是第三方的类库时</li>
</ul>
</li>
</ul>
<h3 id="XML配置"><a href="#XML配置" class="headerlink" title="XML配置"></a>XML配置</h3><ul>
<li><p>模板</p>
<pre><code>&lt;?xml version=&apos;1.0&apos; encoding=&apos;UTF-8&apos; ?&gt;
    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-4.0.xsd&quot;&gt;    
    &lt;/beans&gt;
</code></pre></li>
<li><p>装配简易值</p>
<pre><code>&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;
    &lt;property name=&quot;&quot; value=&quot;&quot;&gt;
</code></pre></li>
<li><p>装配自定义类</p>
<pre><code>&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;
    &lt;property name=&quot;&quot; ref=&quot;&quot;&gt;
</code></pre></li>
<li><p>装配集合</p>
<ul>
<li><a href="https://github.com/superdino123/JavaWebTest/blob/master/src/SpringBeanTest/spring-cfg.xml" target="_blank" rel="noopener">https://github.com/superdino123/JavaWebTest/blob/master/src/SpringBeanTest/spring-cfg.xml</a></li>
</ul>
</li>
<li><p>装配对象集合</p>
<ul>
<li><a href="https://github.com/superdino123/JavaWebTest/blob/master/src/SpringBeanTest/spring-cfg.xml" target="_blank" rel="noopener">https://github.com/superdino123/JavaWebTest/blob/master/src/SpringBeanTest/spring-cfg.xml</a></li>
</ul>
</li>
<li><p>命名空间装配</p>
<ul>
<li>个人觉得方式比较冗余</li>
</ul>
</li>
</ul>
<h3 id="注解装配Bean"><a href="#注解装配Bean" class="headerlink" title="注解装配Bean"></a>注解装配Bean</h3><ul>
<li>方式<ul>
<li>组件扫描</li>
<li>自动装配</li>
</ul>
</li>
<li><p>注解</p>
<ul>
<li>code : <a href="https://github.com/superdino123/JavaWebTest/tree/master/src/SpringBeanNoteTest" target="_blank" rel="noopener">https://github.com/superdino123/JavaWebTest/tree/master/src/SpringBeanNoteTest</a></li>
<li>配置生成Bean<ul>
<li>@Component(value=””)<ul>
<li>注解类，将某个类扫描生成Bean实例</li>
</ul>
</li>
<li>@Value(“”)<ul>
<li>注解属性，给字段注入值</li>
</ul>
</li>
<li>@Bean<ul>
<li>注解方法，将方法返回的对象作为Spring的bean</li>
<li>注解初始化和销毁方法<ul>
<li>@Bean(name=”beanName”, initMethod=”初始化方法名称”, destroyMethod=”销毁方法名称”)</li>
</ul>
</li>
</ul>
</li>
<li>@Conditional<ul>
<li>注解方法，条件化装配</li>
<li><a href="https://github.com/superdino123/JavaWebTest/tree/master/src/SpringBeanNoteTest/ConditionDataSource.java" target="_blank" rel="noopener">https://github.com/superdino123/JavaWebTest/tree/master/src/SpringBeanNoteTest/ConditionDataSource.java</a></li>
</ul>
</li>
</ul>
</li>
<li><p>扫描查询Bean</p>
<ul>
<li>@ComponentScan<ul>
<li>注解类，代表扫描当前类的包下的所有bean</li>
<li>缺点<ul>
<li>只能扫描所在包的Java类</li>
</ul>
</li>
<li>自定义扫描包&amp;类<ul>
<li>@ComponentScan(basePackageClasses={“xx.class”,”b.class”}, basePackages = {“pkg1name”, “pkg2name”})</li>
</ul>
</li>
<li>不建议使用多个ComponentScan注解配置，容易产生重复的对象</li>
</ul>
</li>
<li><p>@Autowired</p>
<ul>
<li>注解属性 &amp;&amp; 注解方法</li>
<li>表示在Spring IoC定位所有的Bean后，这个字段需要按类型注入</li>
<li>默认寻找失败抛出异常</li>
<li>忽略异常<ul>
<li>@Autowired(required = false)</li>
</ul>
</li>
<li><p>带参数的构造方法</p>
<pre><code>public RoleController2(@Autowired RoleService roleService){
    this.roleService = roleService;
}
</code></pre></li>
</ul>
</li>
<li><p>自动装配的歧义</p>
<ul>
<li>同一个接口多个实现类，IoC不清楚用哪个注入，导致注入失败</li>
<li>@Primary<ul>
<li>注解类</li>
<li>优先使用该类注入</li>
</ul>
</li>
<li>@Qualifier(“类的别名-Component中的命名”)<ul>
<li>按照名称查找</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>文件结构优化<ul>
<li>@Import({a.class, b.class})<ul>
<li>装配类，分散配置文件</li>
<li>XML方式<ul>
<li><import resource="spring-datasource.xml"></import></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>区分环境</p>
<ul>
<li><p>@Profile</p>
<ul>
<li>注解类&amp;方法</li>
<li><p>XML方式</p>
<pre><code>//1.beans中所有bean都在该profile中
&lt;beans profile=&quot;&quot;&gt;
//2.一个beans中多个profile
&lt;beans&gt;
    &lt;beans profile=&quot;&quot;&gt;//bean//&lt;/beans&gt;
    &lt;beans profile=&quot;&quot;&gt;//bean//&lt;/beans&gt;
&lt;/beans&gt;
</code></pre></li>
<li>启动方式(配置Profile的实例不会被加载到IoC容器中)<ul>
<li>@ActiveProfiles(“profileName)</li>
</ul>
</li>
<li>配置JVM参数启动Profile<ul>
<li>JAVA_OPTS=”-Dspring.profiles.active=test”</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Bean的作用域"><a href="#Bean的作用域" class="headerlink" title="Bean的作用域"></a>Bean的作用域</h2><ul>
<li>Spring IoC容器会对Bean创建一个实例</li>
<li>方式<ul>
<li>单例<ul>
<li>默认选项，只为Bean生成一个实例</li>
</ul>
</li>
<li>原型<ul>
<li>每次注入都会创建一个实例</li>
</ul>
</li>
<li>会话<ul>
<li>会话过程中之创建一个实例</li>
</ul>
</li>
<li>请求<ul>
<li>一次请求创建一个实例</li>
</ul>
</li>
</ul>
</li>
<li>注解<ul>
<li>原型：@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)</li>
</ul>
</li>
<li>case : <a href="https://github.com/superdino123/JavaWebTest/tree/master/src/SpringBeanNoteTest/BeanValueArea.java" target="_blank" rel="noopener">https://github.com/superdino123/JavaWebTest/tree/master/src/SpringBeanNoteTest/BeanValueArea.java</a></li>
</ul>
<h2 id="Spring-EL注入"><a href="#Spring-EL注入" class="headerlink" title="Spring EL注入"></a>Spring EL注入</h2><ul>
<li>包含功能<ul>
<li>使用Bean的id引用Bean</li>
<li>调用指定对象的方法和访问对象的属性</li>
<li>进行运算</li>
<li>提供正则表达式进行匹配</li>
<li>集合配置</li>
</ul>
</li>
<li>类库<ul>
<li>ExpressionParaser接口<ul>
<li>TemplateAwareExpressionParser抽象类<ul>
<li>InternalSpelExpressionParser</li>
<li>SpelExpressionParser<ul>
<li>SpringEL 实现类</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="col-lg-4  col-md-2">
        <aside id="article-toc" role="navigation" class="fixed">
	<div id="article-toc-inner">
		<i style="padding:0 0 0 10px">目录</i>
		<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Ioc"><span class="toc-text">Ioc</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#BeanFactory-amp-amp-ApplicationContext-接口"><span class="toc-text">BeanFactory &amp;&amp; ApplicationContext 接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bean的定义与初始化"><span class="toc-text">Bean的定义与初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Bean的生命周期"><span class="toc-text">Spring Bean的生命周期</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#装配Spring-Bean"><span class="toc-text">装配Spring Bean</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#如何将对象注入到Ioc容器中"><span class="toc-text">如何将对象注入到Ioc容器中</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring中如何配置JavaBean"><span class="toc-text">Spring中如何配置JavaBean</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置方式比较"><span class="toc-text">配置方式比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XML配置"><span class="toc-text">XML配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注解装配Bean"><span class="toc-text">注解装配Bean</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bean的作用域"><span class="toc-text">Bean的作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-EL注入"><span class="toc-text">Spring EL注入</span></a></li></ol></li></ol>
	</div>
</aside>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        </p><p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>


  </body>
</html>

